{"version":3,"file":"index.js","sources":["../src/js/hero.js","../src/js/home.js"],"sourcesContent":["import { getTrending, getDetails, getTrailer } from './API.js';\nimport { openDetailsModal, openTrailerModal } from './hero_modals.js';\n\nconst heroElement = document.querySelector('.hero');\nconst defaultHeroContent = `\n  <div class=\"hero-content\">\n    <h1 class=\"hero-header\">Let’s Make Your Own Cinema</h1>\n    <p class=\"hero-description\">Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.</p>\n    <button id=\"get-started\">Get Started</button>\n  </div>\n`;\n\n// Funkcja pomocnicza tworzenia elementu gwiazdki\nconst createStarElement = type => {\n  const starElement = document.createElement('span');\n  starElement.classList.add(`${type}-star`);\n\n  starElement.innerHTML = '&#9733;';\n\n  if (type === 'empty') {\n    starElement.innerHTML = '&#9734;';\n  }\n\n  return starElement;\n};\n\n// Wyświetlanie gwiazdek jako rating\nconst displayStarRating = rating => {\n  const starsContainer = document.createElement('div');\n  starsContainer.classList.add('star-rating');\n\n  const fullStars = Math.floor(rating / 2);\n  const halfStar = rating % 2 >= 1 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStar;\n\n  for (let i = 0; i < fullStars; i++) {\n    starsContainer.appendChild(createStarElement('full'));\n  }\n\n  if (halfStar) {\n    starsContainer.appendChild(createStarElement('half'));\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    starsContainer.appendChild(createStarElement('empty'));\n  }\n\n  return starsContainer.outerHTML;\n};\n\n// Funkcja wyciągania filmu dnia\n\nconst renderMovieHero = async () => {\n  try {\n    const data = await getTrending();\n    const movies = data.results;\n\n    if (movies.length === 0) {\n      heroElement.innerHTML = defaultHeroContent;\n      document.getElementById('get-started').addEventListener('click', () => {\n        window.location.href = '/catalog';\n      });\n      return;\n    }\n\n    const movie = movies[Math.floor(Math.random() * movies.length)];\n    heroElement.style.backgroundImage = `linear-gradient(to right, rgba(0, 0, 0, 2), rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.1)), url(https://image.tmdb.org/t/p/original/${movie.backdrop_path})`;\n\n    // Zamiana numerycznego ratingu na gwiazdki\n    heroElement.innerHTML = `\n      <div class=\"movie-info\">\n        <h2 class=\"hero-hader\">${movie.title}</h2>\n        <p class=\"star-rating\">${displayStarRating(movie.vote_average)}</p>\n        <p class=\"hero-description\">${movie.overview}</p>\n        <button id=\"watch-trailer\">Watch Trailer</button>\n        <button id=\"more-details\">More Details</button>\n      </div>\n    `;\n\n    document\n      .getElementById('watch-trailer')\n      .addEventListener('click', async () => {\n        const trailerData = await getTrailer(movie.id);\n        openTrailerModal(trailerData);\n      });\n\n    document\n      .getElementById('more-details')\n      .addEventListener('click', async () => {\n        const details = await getDetails(movie.id);\n        openDetailsModal(details);\n      });\n  } catch (error) {\n    console.error('Error fetching trending movies:', error);\n\n    const desktopImage = '../images/hero-desktop.jpg';\n    const tabletImage = '../images/hero-tablet.jpg';\n    const mobileImage = '../images/hero-mobile.jpg';\n\n    // Sprawdzenie rozmiaru okna\n    if (window.innerWidth >= 1024) {\n      heroElement.style.backgroundImage = `url(${desktopImage})`;\n    } else if (window.innerWidth >= 768) {\n      heroElement.style.backgroundImage = `url(${tabletImage})`;\n    } else {\n      heroElement.style.backgroundImage = `url(${mobileImage})`;\n    }\n\n    heroElement.innerHTML = defaultHeroContent;\n  }\n};\n\nrenderMovieHero();\n","import { getTrending, getUpcoming, convertGenreIdsToNames } from './API.js';\nimport { openDetailsModal } from './hero_modals.js';\n\nconst renderStars = rating => {\n  const totalStars = 5;\n  const roundedRating = Math.round(rating * 2) / 2;\n\n  const fullStars = Math.floor(roundedRating);\n  const halfStar = roundedRating % 1 === 0.5 ? 1 : 0;\n  const emptyStars = totalStars - fullStars - halfStar;\n\n  let starHTML = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    starHTML += `<svg class=\"icon\"><use xlink:href=\"#icon-star\"></use></svg>`;\n  }\n  if (halfStar) {\n    starHTML += `<svg class=\"icon\"><use xlink:href=\"#icon-star-half\"></use></svg>`;\n  }\n  for (let i = 0; i < emptyStars; i++) {\n    starHTML += `<svg class=\"icon\"><use xlink:href=\"#icon-star-empty\"></use></svg>`;\n  }\n\n  return starHTML;\n};\n\nconst renderTrendingMovies = async () => {\n  try {\n    const trendingData = await getTrending('week');\n    const trendingMovies = trendingData.results;\n\n    const trendingContainer = document.querySelector('#trending-container');\n\n    const numberOfCards = window.innerWidth < 768 ? 1 : 3;\n\n    trendingContainer.innerHTML = '';\n\n    for (const movie of trendingMovies.slice(0, numberOfCards)) {\n      const genreNames = await convertGenreIdsToNames(movie.genre_ids);\n      const limitedGenreNames = genreNames.slice(0, 2);\n      const genreText = limitedGenreNames.join(', ');\n\n      const movieElement = document.createElement('div');\n      movieElement.classList.add('trending-card');\n      movieElement.setAttribute('data-movie-id', movie.id);\n\n      const posterUrl = movie.poster_path\n        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n        : `https://image.tmdb.org/t/p/w500${movie.backdrop_path}`;\n\n      movieElement.innerHTML = `\n        <img src=\"${posterUrl}\" alt=\"${movie.title}\">\n        <h3>${movie.title.toUpperCase()}</h3>\n        <p>${genreText} | ${new Date(\n        movie.release_date\n      ).getFullYear()} ${renderStars(movie.vote_average / 2)}</p>\n      `;\n\n      movieElement.style.backgroundImage = `url('https://image.tmdb.org/t/p/original${movie.backdrop_path}')`;\n\n      movieElement.innerHTML = `\n  <div class=\"card-info\">\n    <h3>${movie.title.toUpperCase()}</h3>\n    <div class=\"card-info-inner\">\n      <div class=\"card-info-left\">\n        <p class=\"card-info-p\">${genreText} | ${new Date(\n        movie.release_date\n      ).getFullYear()}</p>\n      </div>\n      <div class=\"card-info-right\">\n        ${renderStars(movie.vote_average / 2)}\n      </div>\n    </div>\n  </div>\n`;\n\n      movieElement.addEventListener('click', async () => {\n        const movieDetails = {\n          ...movie,\n          genres: genreNames,\n        };\n        openDetailsModal(movieDetails);\n      });\n\n      trendingContainer.appendChild(movieElement);\n    }\n  } catch (error) {\n    console.error('Error fetching trending movies:', error);\n  }\n};\n\nconst isMovieInLibrary = movieId => {\n  const library = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  return library.some(movie => movie.id === movieId);\n};\n\nconst addMovieToLibrary = movie => {\n  const library = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  const movieToAdd = {\n    id: movie.id,\n    title: movie.title,\n    poster: `https://image.tmdb.org/t/p/w500${movie.poster_path}`,\n    backdrop_path: movie.backdrop_path,\n    release_date: movie.release_date,\n    vote_average: movie.vote_average,\n    vote_count: movie.vote_count,\n    popularity: movie.popularity,\n    overview: movie.overview,\n    genre_ids: movie.genre_ids,\n  };\n  library.push(movieToAdd);\n  localStorage.setItem('myLibrary', JSON.stringify(library));\n};\n\nconst removeMovieFromLibrary = movieId => {\n  let library = JSON.parse(localStorage.getItem('myLibrary')) || [];\n  library = library.filter(movie => movie.id !== movieId);\n  localStorage.setItem('myLibrary', JSON.stringify(library));\n};\n\nconst handleLibraryToggle = (movie, button) => {\n  const movieWithFullPoster = {\n    ...movie,\n    poster: `https://image.tmdb.org/t/p/w500${movie.poster_path}`,\n  };\n\n  if (isMovieInLibrary(movieWithFullPoster.id)) {\n    removeMovieFromLibrary(movieWithFullPoster.id);\n    button.textContent = 'Add to my library';\n  } else {\n    addMovieToLibrary(movieWithFullPoster);\n    button.textContent = 'Remove from my library';\n  }\n};\n\nconst renderUpcomingMovie = async () => {\n  try {\n    const upcomingData = await getUpcoming();\n    const upcomingMovies = upcomingData.results;\n    const movie = upcomingMovies[0];\n\n    const genreNames = await convertGenreIdsToNames(movie.genre_ids);\n    const genreText = genreNames.join(', ');\n\n    document.getElementById(\n      'upcoming-movie-poster'\n    ).src = `https://image.tmdb.org/t/p/w500${movie.backdrop_path}`;\n    document.getElementById('upcoming-movie-title').textContent = movie.title;\n    document.getElementById('upcoming-release-date').textContent =\n      movie.release_date;\n\n    document.querySelector('.vote-average').textContent = movie.vote_average;\n    document.querySelector('.vote-count').textContent = movie.vote_count;\n\n    document.getElementById('upcoming-popularity').textContent =\n      movie.popularity;\n    document.getElementById('upcoming-overview').textContent = movie.overview;\n    document.getElementById('upcoming-genre').textContent = genreText;\n\n    const addLibraryButton = document.getElementById('add-library-button');\n    addLibraryButton.textContent = isMovieInLibrary(movie.id)\n      ? 'Remove from my library'\n      : 'Add to my library';\n\n    addLibraryButton.addEventListener('click', () =>\n      handleLibraryToggle(movie, addLibraryButton)\n    );\n  } catch (error) {\n    console.error('Error fetching upcoming movies:', error);\n    document.getElementById('upcoming-no-movies-message').style.display =\n      'block';\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderTrendingMovies();\n  renderUpcomingMovie();\n  window.addEventListener('resize', renderTrendingMovies);\n});\n"],"names":["heroElement","defaultHeroContent","createStarElement","type","starElement","displayStarRating","rating","starsContainer","fullStars","halfStar","emptyStars","i","renderMovieHero","movies","getTrending","movie","trailerData","getTrailer","openTrailerModal","details","getDetails","openDetailsModal","error","desktopImage","tabletImage","mobileImage","renderStars","roundedRating","starHTML","renderTrendingMovies","trendingMovies","trendingContainer","numberOfCards","genreNames","convertGenreIdsToNames","genreText","movieElement","posterUrl","movieDetails","isMovieInLibrary","movieId","addMovieToLibrary","library","movieToAdd","removeMovieFromLibrary","handleLibraryToggle","button","movieWithFullPoster","renderUpcomingMovie","getUpcoming","addLibraryButton"],"mappings":"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"}