{"version":3,"file":"index.js","sources":["../src/js/API.js","../src/js/hero_modals.js","../src/js/hero.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2Y2IxMWQ4ZGE0NTZlOGI5OTIxM2EyNDk4ODM4OGQyNSIsIm5iZiI6MTcyODcyMDEzMC44MDY0Niwic3ViIjoiNjcwYTJiNDEzYmI0NTU3YzY2OWFmYzM5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.Pgojbxf9JKo_J1qf6Qmglon5qZgkr9wpZ4I978dGQU8';\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\naxios.defaults.headers.common['Authorization'] = API_KEY;\n\n//pozyskanie wszystkich filmów - do wykorzystania przy populowania katalogu\n//time_window to string \"day\" albo \"week\"\nexport const getTrending = async (time_window = 'day') => {\n  const response = await axios.get(`/trending/movie/${time_window}`);\n  return response.data;\n};\n\n//pozyskiwanie nadchodzących\nexport const getUpcoming = async () => {\n  const response = await axios.get(`movie/upcoming`);\n  return response.data;\n};\n\n//wyszukiwanie filmów\n\n//przykładowe searchParams, do zmiany na input value jak już będzie przygotowana strona;\nconst searchParams = new URLSearchParams({\n  query: 'Deadpool',\n  primary_release_year: 2024,\n  page: 1,\n});\n\nexport const searchFilm = async () => {\n  const response = await axios.get(`/search/movie?${searchParams}`);\n  return response.data;\n};\n\n//pozyskiwanie szczegółów\nexport const getDetails = async movie_id => {\n  const response = await axios.get(`/movie/${movie_id}`);\n  return response.data;\n};\n\n//trailer\nexport const getTrailer = async movie_id => {\n  const response = await axios.get(`/movie/${movie_id}/videos`);\n  return response.data;\n};\n\n//gatunki\nconst getGenres = async () => {\n  try {\n    const response = await axios.get(`/genre/movie/list`);\n    const genres = response.data.genres;\n    return new Map(genres.map(genre => [genre.id, genre.name]));\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const convertGenreIdsToNames = async genreIds => {\n  try {\n    const genreMap = await getGenres();\n    const genreNames = genreIds.map(id => genreMap.get(id) || 'Unknow genre');\n    return genreNames;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n//kraje\nexport const getCountries = async () => {\n  const response = await axios.get(`/configuration/countries`);\n  return response.data;\n};\n\n//logowanie danych do konsoli\nexport const logData = async fn => {\n  try {\n    const data = await fn;\n    console.log(data);\n  } catch (error) {\n    console.log(error.message);\n  }\n};\n","// Modal dla zwiastuna filmu \nexport const openTrailerModal = (trailerData) => {\n  const modalTrailer = document.getElementById('modal-trailer');\n  const trailer = trailerData.results.find(vid => vid.type === 'Trailer');\n\n  if (trailer) {\n    modalTrailer.innerHTML = `\n      <div class=\"modal-content\">\n        <span class=\"close-modal\">&times;</span>\n        <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/${trailer.key}\" \n          frameborder=\"0\" allowfullscreen></iframe>\n      </div>\n    `;\n  } else {\n    modalTrailer.innerHTML = `\n      <div class=\"modal-content error-pop-up\">\n        <span class=\"close-modal\">&times;</span>\n        <img src=\"../images/oops-logo.png\" alt=\"camera icon with popcorn\" width=\"363\" height=\"318\"/>\n        <p>OOPS... We are very sorry! But we couldn’t find the trailer.</p>\n      </div>\n    `;\n  }\n\n  modalTrailer.style.display = 'block';\n\n  // Zamknięcie modala dla zwiastuna filmu przez ikonę zamknięcia\n  modalTrailer.querySelector('.close-modal').addEventListener('click', () => {\n    modalTrailer.style.display = 'none';\n  });\n\n  // Zamknięcie modala przez kliknięcie w tło modala\n  modalTrailer.addEventListener('click', (event) => {\n    if (event.target === modalTrailer) {\n      modalTrailer.style.display = 'none';\n    }\n  });\n};\n\n// Modal dla szczegółów filmu\nexport const openDetailsModal = (details) => {\n  const modalDetails = document.getElementById('modal-details');\n\n  const backgroundImage = details.backdrop_path\n    ? `https://image.tmdb.org/t/p/original/${details.backdrop_path}`\n    : `https://image.tmdb.org/t/p/original/${details.poster_path}`;\n\n  modalDetails.innerHTML = `\n    <div class=\"modal-content\" style=\"background-image: url('${backgroundImage}'); background-size: cover; background-position: center; padding: 20px; color: white;\">\n      <span class=\"close-modal\" style=\"cursor: pointer; font-size: 24px;\">&times;</span>\n      <h2>${details.title}</h2>\n      <p><strong>Vote / Votes:</strong> ${details.vote_average} / ${details.vote_count}</p>\n      <p><strong>Popularity:</strong> ${details.popularity}</p>\n      <p><strong>Genres:</strong> ${details.genres.map(genre => genre.name).join(', ')}</p>\n      <p><strong>Overview:</strong> ${details.overview}</p>\n      <button id=\"add-to-library\" class=\"add-to-library-btn\">Add to my library</button>\n    </div>\n  `;\n  modalDetails.style.display = 'block';\n\n  // Zamknięcie modala dla szczegółów filmu przez ikonę zamknięcia\n  modalDetails.querySelector('.close-modal').addEventListener('click', () => {\n    modalDetails.style.display = 'none';\n  });\n\n  // Zamknięcie modala przez kliknięcie w tło modala\n  modalDetails.addEventListener('click', (event) => {\n    if (event.target === modalDetails) {\n      modalDetails.style.display = 'none';\n    }\n  });\n};","import { getTrending, getDetails, getTrailer } from './API.js'; \nimport { openDetailsModal, openTrailerModal } from './hero_modals.js';\n\nconst heroElement = document.querySelector('.hero');\nconst defaultHeroContent = `\n  <div class=\"hero-content\">\n    <h1>Let’s Make Your Own Cinema</h1>\n    <p>Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.</p>\n    <button id=\"get-started\">Get Started</button>\n  </div>\n`;\n\n// Funkcja pomocnicza tworzenia elementu gwiazdki\nconst createStarElement = (type) => {\n  const starElement = document.createElement('span');\n  starElement.classList.add(`${type}-star`);\n  \n  starElement.innerHTML = '&#9733;';\n  \n  if (type === 'empty') {\n    starElement.innerHTML = '&#9734;';\n  }\n\n  return starElement;\n};\n\n// Wyświetlanie gwiazdek jako rating\nconst displayStarRating = (rating) => {\n  console.log(`Rating dla filmu: ${rating}`);  // Sprawdzenie, czy rating jest zwracany\n\n  const starsContainer = document.createElement('div');\n  starsContainer.classList.add('star-rating');\n\n  const fullStars = Math.floor(rating / 2);\n  const halfStar = (rating % 2) >= 1 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStar;\n\n  for (let i = 0; i < fullStars; i++) {\n    starsContainer.appendChild(createStarElement('full'));\n  }\n\n  if (halfStar) {\n    starsContainer.appendChild(createStarElement('half'));\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    starsContainer.appendChild(createStarElement('empty'));\n  }\n\n  return starsContainer.outerHTML;\n};\n\n// Funkcja wyciągania filmu dnia\n\nconst renderMovieHero = async () => {\n  try {\n    const data = await getTrending();\n    const movies = data.results;\n\n    if (movies.length === 0) {\n      heroElement.innerHTML = defaultHeroContent;\n      document.getElementById('get-started').addEventListener('click', () => {\n        window.location.href = '/catalog';\n      });\n      return;\n    }\n\n    const movie = movies[Math.floor(Math.random() * movies.length)];\n    heroElement.style.backgroundImage = `url(https://image.tmdb.org/t/p/original/${movie.backdrop_path})`;\n\n    // Zamiana numerycznego ratingu na gwiazdki\n    heroElement.innerHTML = `\n      <div class=\"movie-info\">\n        <h2>${movie.title}</h2>\n        <p>Rating: ${displayStarRating(movie.vote_average)}</p>\n        <p>${movie.overview}</p>\n        <button id=\"watch-trailer\">Watch Trailer</button>\n        <button id=\"more-details\">More Details</button>\n      </div>\n    `;\n\n    document.getElementById('watch-trailer').addEventListener('click', async () => {\n      const trailerData = await getTrailer(movie.id);\n      openTrailerModal(trailerData);\n    });\n\n    document.getElementById('more-details').addEventListener('click', async () => {\n      const details = await getDetails(movie.id);\n      openDetailsModal(details);\n    });\n\n  }  catch (error) {\n    console.error('Error fetching trending movies:', error);\n\n    const desktopImage = '../images/hero-desktop.jpg';\n    const tabletImage = '../images/hero-tablet.jpg';\n    const mobileImage = '../images/hero-mobile.jpg';\n\n    // Sprawdzenie rozmiaru okna\n    if (window.innerWidth >= 1024) {\n      heroElement.style.backgroundImage = `url(${desktopImage})`;\n    } else if (window.innerWidth >= 768) {\n      heroElement.style.backgroundImage = `url(${tabletImage})`;\n    } else {\n      heroElement.style.backgroundImage = `url(${mobileImage})`;\n    }\n\n    heroElement.innerHTML = defaultHeroContent;\n  }\n};\n\nrenderMovieHero();"],"names":["API_KEY","axios","getTrending","time_window","getDetails","movie_id","getTrailer","openTrailerModal","trailerData","modalTrailer","trailer","vid","event","openDetailsModal","details","modalDetails","backgroundImage","genre","heroElement","defaultHeroContent","createStarElement","type","starElement","displayStarRating","rating","starsContainer","fullStars","halfStar","emptyStars","i","renderMovieHero","movies","movie","error","desktopImage","tabletImage","mobileImage"],"mappings":"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"}