import"./assets/footer-DHKSWr6F.js";import{d as C,g as O,b as w,c as P}from"./assets/hero_modals-CRgCPP3_.js";import{a as b,i as k}from"./assets/vendor-nSNXNpMc.js";const e=(t,n)=>Object.assign(document.createElement(t),n),M=({poster_path:t,title:n,genre_ids:r,release_date:m})=>{const l=e("li",{className:"card"}),o=e("img",{className:"card-poster",src:`https://image.tmdb.org/t/p/original/${t}`,width:200,height:300}),s=e("div",{className:"card-description"}),c=e("p",{className:"card-title",textContent:n}),h=e("p",{className:"card-description-element"});C(r).then(x=>{h.textContent=`${x.join(", ")} |`});const f=e("p",{className:"card-description-element",textContent:m.slice(0,4)});return s.append(h,f),l.append(o,c,s),l},I=document.querySelector(".catalog"),D=document.querySelector("#searchForm"),L=document.querySelector("#film-list"),E=document.querySelector("#searchForm-input"),v=document.querySelector("#searchForm-input-clear"),d=document.querySelector("#pagination");v.style.display="none";let i=1;const S="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2Y2IxMWQ4ZGE0NTZlOGI5OTIxM2EyNDk4ODM4OGQyNSIsIm5iZiI6MTcyODcyMDEzMC44MDY0Niwic3ViIjoiNjcwYTJiNDEzYmI0NTU3YzY2OWFmYzM5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.Pgojbxf9JKo_J1qf6Qmglon5qZgkr9wpZ4I978dGQU8";b.defaults.baseURL="https://api.themoviedb.org/3";b.defaults.headers.common.Authorization=S;const N=(t,n,r)=>{const m=document.createDocumentFragment();m.append(...t.map(l=>{const o=r(l);return o.addEventListener("click",async s=>{if(s.target.classList.contains("card-poster"))try{const c=await w(l.id);P(c)}catch(c){console.log("Error fetching movie details:",c)}}),o})),n.append(m)},q=async()=>{try{const t=await O("day");N(t.results,L,M)}catch(t){I.innerHTML="<h2>OOPS!</h2><p>We are very sorry! We don’t have any results matching your search.</p>",console.log(t)}},T=async()=>{try{const t=new URLSearchParams({query:E.value.trim(),include_adult:!1,page:i});return(await b.get(`/search/movie?${t}`)).data}catch(t){console.log(t)}},u=async()=>{try{const t=await T();L.innerHTML="",N(t.results,L,M)}catch(t){console.log("Error in search:",t)}},y=async()=>{try{const n=(await T()).total_pages,r=5;d.innerHTML="",d.style.display="flex";const m=e("li",{classList:"pagination-item"}),l=e("button",{classList:"pagination-btn prev-page",id:"previous-page",textContent:"<"});l.addEventListener("click",()=>{i>1&&(i--,u(),y())}),m.append(l),d.append(m);const o=e("ul",{classList:"page-list"});d.append(o),o.style.display="flex";let s=Math.max(1,i-Math.floor(r/2)),c=Math.min(n,s+r-1);if(c-s<r-1&&(s===1?c=Math.min(n,s+r-1):s=Math.max(1,c-r+1)),s>1){const a=e("li",{classList:"pagination-item"}),p=e("button",{classList:"pagination-btn",textContent:"1"});if(p.addEventListener("click",()=>{i=1,u(),y()}),a.append(p),o.append(a),s>2){const g=e("li",{classList:"pagination-item",textContent:"..."});o.append(g)}}for(let a=s;a<=c;a++){const p=e("li",{classList:"pagination-item"}),g=e("button",{classList:"pagination-btn",textContent:a});g.addEventListener("click",()=>{i=a,u(),y()}),p.append(g),o.append(p)}if(c<n){if(c<n-1){const g=e("li",{classList:"pagination-item",textContent:"..."});o.append(g)}const a=e("li",{classList:"pagination-item"}),p=e("button",{classList:"pagination-btn",textContent:n});p.addEventListener("click",()=>{i=n,u(),y()}),a.append(p),o.append(a)}const h=e("li",{classList:"pagination-item"}),f=e("button",{classList:"pagination-btn next-page",id:"next-page",textContent:">"});f.addEventListener("click",()=>{i<n&&(i++,u(),y())}),h.append(f),d.append(h),i===1&&(l.disabled=!0),i===n&&(f.disabled=!0),Array.from(document.querySelectorAll(".pagination-btn")).slice(1,-1).forEach(a=>{a.textContent==i&&(a.style.backgroundColor="red")})}catch(t){console.log(t)}};document.addEventListener("DOMContentLoaded",q);D.addEventListener("submit",t=>{t.preventDefault(),E.value!==""?(L.innerHTML="",d.innerHTML="",(async()=>(i=1,await u(),L.childElementCount===0&&(d.style.display="none",I.innerHTML="<h2>OOPS!</h2><p>We are very sorry! We don’t have any results matching your search.</p>"),await y()))(),v.style.display="inline"):k.info({message:"Type film title."})});v.addEventListener("click",t=>{v.style.display="none",d.style.display="none",E.value=""});
//# sourceMappingURL=catalog.js.map
